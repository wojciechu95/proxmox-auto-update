
# ===========================
# Proxmox Auto-Update Script
# Version: 1.4.0-intelligent
# Author: Wojciech Piwowarski
# ===========================

ðŸ“¦ Instrukcja instalacji Proxmox Auto-Update (v1.4.0-intelligent):

1. Rozpakuj paczkÄ™:
   tar -xvzf proxmox-auto-update.tar.gz -C /

2. Edytuj plik `/usr/local/bin/proxmox-auto-update.sh` i ustaw swÃ³j adres e-mail:

   EMAIL="twoj_adres@email.com"

3. Ustaw uprawnienia do pliku wykonywalnego:

   chmod +x /usr/local/bin/proxmox-auto-update.sh

4. ZaÅ‚aduj konfiguracjÄ™ systemd:

   systemctl daemon-reload
   â–¸ Powoduje przeÅ‚adowanie konfiguracji jednostek systemd (usÅ‚ug, timerÃ³w itd.), aby uwzglÄ™dniÄ‡ dodane lub zmodyfikowane pliki.*

5. WÅ‚Ä…cz timer:

   â–¸ Aby uruchomiÄ‡ timer natychmiast i aktywowaÄ‡ go na staÅ‚e:
   systemctl enable --now proxmox-auto-update.timer

   â–¸ Aby tylko aktywowaÄ‡ timer (bez uruchamiania teraz, wystartuje przy nastÄ™pnym reboot):
   systemctl enable proxmox-auto-update.timer

   â–¸ Aby uruchomiÄ‡ timer tylko raz (do kolejnego rebootu):
   systemctl start proxmox-auto-update.timer

6. SprawdÅº, czy timer dziaÅ‚a poprawnie:

   systemctl status proxmox-auto-update.timer

7. Skonfiguruj 'msmtp' aby dziaÅ‚aÅ‚o wysyÅ‚anie maili.

   â–¸ Plik konfiguracyjny: ~/.msmtprc (lub globalnie: /etc/msmtprc)

   â–¸ Upewnij siÄ™, Å¼e msmtp jest zainstalowane:
   apt install msmtp msmtp-mta -y

   â–¸ Uprawnienia do plikÃ³w:
   chmod 600 ~/.msmtprc

   ðŸ§ª Test wysyÅ‚ki:
   echo "To: twoj_email@gmail.com" | msmtp --debug --from=default -t


  ðŸ” *Opcjonalnie: zabezpieczenie hasÅ‚a GPG*

   â–¸ Zaszyfruj hasÅ‚o:
   echo "twoje_haslo" | gpg --encrypt --recipient email@email.com > ~/.msmtp-password.gpg

   â–¸ Ustaw `msmtprc`, aby korzystaÅ‚ z GPG:
   passwordeval "gpg --quiet --for-your-eyes-only --no-tty --decrypt ~/.msmtp-password.gpg"

   â–¸ Ustaw odpowiednie uprawnienia:
   chmod 600 ~/.msmtp-password.gpg

ðŸ“‚ Logi znajdziesz w: /var/log/proxmox-auto-update.log
